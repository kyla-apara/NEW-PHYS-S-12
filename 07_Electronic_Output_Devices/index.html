<!DOCTYPE html>
<html lang="en">

<title>PHYS S-12: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../style.css" rel="stylesheet">

<body>


<xmp theme="journal" style="display:none;">



  # Week 7: Electronic Input Devices 

Week 7 was electronic input devices! The assignement description was:

1.) Use an output device that you haven't used before. 

2.) Write a microcontroller program that integrates at least one input device and one output device whie avoiding the delay function and use the C++ class structure.

3.) Use an oscilloscope to discover the time domain at which your output device is operating.

4.) Prepare CAD files for CNC next class. 

Here's what I did!


## Output Device: LED Strips

In class, for the output device I had never used before, I chose the LED Strip. The only requirement was that at least 4 individual LEDs in the strip would have a different color. I started off by installing the Adafruit Neopixel Library with the library manager. I opened the strandtest code into Ardiuno and read over the instructions and explanations from the <a href="https://learn.adafruit.com/adafruit-neopixel-uberguide/arduino-library-use" target="_blank">Adafruit website.</a> 

After soddering on the 3 wires to my LED strip, I connected it to my arduino. I then shortend down the code from the strandtest because I only needed to color the 4 LEDs. I set my order to red, green, blue and mageta. Here is my code!

<a href='./Strandtest.ino' download > Click on this to download my Arduino file!</a>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/arduino.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script> 


<pre><code class="language-arduino">
#include <Adafruit_NeoPixel.h>
#ifdef __AVR__
 #include <avr/power.h> // Required for 16 MHz Adafruit Trinket
#endif

// Which pin on the Arduino is connected to the NeoPixels?
// On a Trinket or Gemma we suggest changing this to 1:
#define LED_PIN    6

// How many NeoPixels are attached to the Arduino?
#define LED_COUNT 7

// Declare our NeoPixel strip object:
Adafruit_NeoPixel strip(LED_COUNT, LED_PIN, NEO_GRB + NEO_KHZ800);
// Argument 1 = Number of pixels in NeoPixel strip
// Argument 2 = Arduino pin number (most are valid)
// Argument 3 = Pixel type flags, add together as needed:
//   NEO_KHZ800  800 KHz bitstream (most NeoPixel products w/WS2812 LEDs)
//   NEO_KHZ400  400 KHz (classic 'v1' (not v2) FLORA pixels, WS2811 drivers)
//   NEO_GRB     Pixels are wired for GRB bitstream (most NeoPixel products)
//   NEO_RGB     Pixels are wired for RGB bitstream (v1 FLORA pixels, not v2)
//   NEO_RGBW    Pixels are wired for RGBW bitstream (NeoPixel RGBW products)


// setup() function -- runs once at startup --------------------------------

void setup() {
  strip.begin();           // INITIALIZE NeoPixel strip object (REQUIRED)
  strip.show();            // Updates the whole strip at once
  strip.setBrightness(50); // Set BRIGHTNESS to about 1/5 (max = 255)
}

// loop() function -- runs repeatedly as long as board is on ---------------

void loop() {
  // Fill along the length of the strip in various colors...
  strip.show();
  strip.setPixelColor(0, 255, 0, 0);
  strip.setPixelColor(1, 0, 255, 0);
  strip.setPixelColor(2, 0, 0, 255);
  strip.setPixelColor(3, 255, 0, 255);
}

  </code></pre> 


![image of the LED](./Led_4.jpg)


## One Input Device & One Output Device!

For this portion of the assignment I used the previous copper tape input device and the led strip I just made. I connected the two functions with a conditional statement so it will turn off and on at certain values. Here is the code!

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/arduino.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script> 


<pre><code class="language-arduino">
#include <Adafruit_NeoPixel.h>
#ifdef __AVR__
#include <avr/power.h> // Required for 16 MHz Adafruit Trinket
#endif

#define LED_PIN    6
#define LED_COUNT 7
long result;   //variable for the result of the tx_rx measurement.
int analog_pin = A0;
int tx_pin = 4;

// Declare our NeoPixel strip object:
Adafruit_NeoPixel strip(LED_COUNT, LED_PIN, NEO_GRB + NEO_KHZ800);
// Argument 1 = Number of pixels in NeoPixel strip
// Argument 2 = Arduino pin number (most are valid)
// Argument 3 = Pixel type flags, add together as needed:

void setup() {
  strip.begin();           // INITIALIZE NeoPixel strip object (REQUIRED)
  strip.show();            // Updates the whole strip at once
  strip.setBrightness(50); // Set BRIGHTNESS to about 1/5 (max = 255)

  pinMode(tx_pin, OUTPUT);      //Pin 4 provides the voltage step
  Serial.begin(9600);
}


void loop() {
  result = tx_rx();
  Serial.println(result);
  // Fill along the length of the strip in various colors...
  strip.show();
  strip.setPixelColor(0, 255, 0, 0);
  strip.setPixelColor(1, 0, 255, 0);
  strip.setPixelColor(2, 0, 0, 255);
  strip.setPixelColor(3, 255, 0, 255);

  if (result > 8000) {
    result; strip.show();
    strip.setPixelColor(0, 255, 0, 0);
    strip.setPixelColor(1, 0, 255, 0);
    strip.setPixelColor(2, 0, 0, 255);
    strip.setPixelColor(3, 255, 0, 255);
  }

  else {
    result < 7500;
  } {
    result; strip.setPixelColor(0, 0 , 0, 0);
    strip.setPixelColor(1, 0, 0 , 0);
    strip.setPixelColor(2, 0, 0, 0);
    strip.setPixelColor(3, 0, 0, 0);
  }

}

long tx_rx() {        // Function to execute rx_tx algorithm and return a value
  // that depends on coupling of two electrodes.
  // Value returned is a long integer.
  int read_high;
  int read_low;
  int diff;
  long int sum;
  int N_samples = 100;    // Number of samples to take.  Larger number slows it down, but reduces scatter.

  sum = 0;

  for (int i = 0; i < N_samples; i++) {
    digitalWrite(tx_pin, HIGH);             // Step the voltage high on conductor 1.
    read_high = analogRead(analog_pin);     // Measure response of conductor 2.
    delayMicroseconds(100);                 // Delay to reach steady state.
    digitalWrite(tx_pin, LOW);              // Step the voltage to zero on conductor 1.
    read_low = analogRead(analog_pin);      // Measure response of conductor 2.
    diff = read_high - read_low;            // desired answer is the difference between high and low.
    sum += diff;                            // Sums up N_samples of these measurements.
  }

  return sum;
}

 </code></pre> 

 After inputting my code I tested my range and adjusted the values so if the result of the copper wire is greater than 7500 the LEDs will turn on and if the value is less than 8000 then the LEDs will turn off.

 ![Image of the Led full circuit](./LED_With_Copper.jpg)

 ![GIF of the finished project](./Copper_LED.gif)


 After getting the input and output devices to work, I then had to create a class. I decided the best way to do this would be to subsitute a button for the copper pieces to turn on the LED. 

  Use this to go back to the homepage! [link](../index.html).



</xmp>
</body>

<script src="https://strapdownjs.com/v/0.2/strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>